{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nimport fetch from \"isomorphic-fetch\";\nimport Error from \"next/error\";\nimport Link from \"next/link\";\nimport StoryList from \"../component/StoryList\";\nimport Layout from \"../component/Layout\";\n\nclass Index extends React.Component {\n  static async getInitialProps({\n    req,\n    res,\n    query\n  }) {\n    let stories;\n    let page;\n\n    try {\n      page = Number(query.page) || 1;\n      const response = await fetch(`https://node-hnapi.herokuapp.com/news?page=${page}`);\n      stories = await response.json();\n    } catch (err) {\n      console.log(err);\n      stories = [];\n    }\n\n    return {\n      stories,\n      page\n    };\n  }\n\n  componentDidMount() {\n    if (\"serviceWorker\" in navigator) {\n      navigator.serviceWorker.register(\"/service-worker.js\").then(registration => console.log(\"Service Worker Registration Successful\", registration)).catch(err => {\n        console.warn(\"Service Worker Registraion failed!\", err.message);\n      });\n    }\n  }\n\n  render() {\n    const {\n      stories,\n      page\n    } = this.props;\n\n    if (stories.length == 0) {\n      return /*#__PURE__*/_jsx(Error, {\n        statusCode: 503\n      });\n    }\n\n    return /*#__PURE__*/_jsxs(Layout, {\n      title: \"Hacker Next\",\n      description: \"Next js sample\",\n      backButton: page > 1,\n      children: [/*#__PURE__*/_jsx(StoryList, {\n        stories: stories\n      }), /*#__PURE__*/_jsx(\"footer\", {\n        className: \"jsx-2581509140\",\n        children: /*#__PURE__*/_jsx(Link, {\n          href: `/?page=${+page + 1}`,\n          children: /*#__PURE__*/_jsxs(\"a\", {\n            className: \"jsx-2581509140\",\n            children: [\"Next Page(\", page + 1, \")\"]\n          })\n        })\n      }), /*#__PURE__*/_jsx(_JSXStyle, {\n        id: \"2581509140\",\n        children: [\"footer.jsx-2581509140{padding:1em;}\", \"footer.jsx-2581509140 a.jsx-2581509140{font-weight:bold;color:black;-webkit-text-decoration:none;text-decoration:none;}\"]\n      })]\n    });\n  }\n\n}\n\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}